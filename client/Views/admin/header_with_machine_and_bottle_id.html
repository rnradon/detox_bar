<link rel="stylesheet" type="text/css" href="res/css/header.css">

<script>
function openNav() {
    document.getElementById("mySidenav").style.width = "220px";
    document.getElementById("main").style.marginLeft = "220px";
    document.getElementById("arrow").style.display = "none";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft= "0";
    document.getElementById("arrow").style.display = "block";
}
</script>	

<div id="mySidenav" class="sidenav" style="box-shadow: 2px 4px 2px #a9a9a9;">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a class="anchor" href="" id="home"><i class="fa fa-home" aria-hidden="true"></i></i> Home</a>
  <a class="anchor" href="" id="add"><i class="fa fa-plus-circle" aria-hidden="true"></i></i> Add Machine</a>
  <a class="anchor" href="" id="delete"> <i class="fa fa-trash" aria-hidden="true"></i></i> Delete Machine</a>
  <a class="anchor" href="" id="edit"><i class="fa fa-pencil" aria-hidden="true"></i></i> Edit Machine</a>
  <a class="anchor" href="" id="view"><i class="fa fa-book" aria-hidden="true"></i></i> View Machines</a>
  <a class="anchor" href="" id="configure"><i class="fa fa-cogs" aria-hidden="true"></i> Configure Machine</a>
  <a class="anchor" href="" id="prefed"><i class="fa fa-coffee" aria-hidden="true"></i> Pre-Fed Recipes</a>
  <!-- <a class="anchor" href="" id="change_auth_password"><i class="fa fa-key" aria-hidden="true"></i> Change Password</a> -->
  <a class="anchor" href="" id="recipes"><i class="fa fa-beer" aria-hidden="true"></i> View Recipes</a>
  <a class="anchor" href="" id="logout"><i class="fa fa-sign-out" aria-hidden="true"></i> Logout</a>
  
  <!-- <a href="#">Clients</a>
  <a href="#">Contact</a> -->
   <a class="anchor" href="" id="logo_home" style="bottom: 0; margin-top: 20%"><img src="../res/img/adelantos.jpg" style="bottom: 0; width: 70%; margin-top: 10%; border-radius: 20%"></a>
  <small id="passwordHelpInline" class="text-muted" style="text-align: center;margin-left: 10%;">Copyright &#169; Adelantos Pvt. Ltd.</small>
</div>

<script>
     var unsorted_url = window.location.pathname.split('machine_id=');
   
    var semisorted_url = unsorted_url[1].split('/bottle_id=')
    var machine_id = semisorted_url[0]
   
     
    var userId_url = semisorted_url[1].split('/access_token=');
   

    var userId = userId_url[0]
    

    access_token = "access_token=" + userId_url[1]

  
   

   $("#logout").click(function logout(){
    
    var url = '/logout?' + access_token
    
    $.ajax({
            method: 'POST',
            url : '/api/users/logout?' + access_token, // or whatever
            dataType : 'json',
            success : function (response) {
                // alert("LOGOUT")
                // var app = angular.module('my_app', []);
                // app.controller('myCtrl', function($scope, $http) {
                //   $http.get('/api/gym_users/findOne?filter[where][registration_number]=' + reg_number + '&' + access_token)
                //   .then(function(response) {
                //       $scope.myWelcome = response.data;
                //   });
                // });
                
                window.location.href = '/';
            },
            error: function (response) {
                alert("Authentication Timed Out")
                // setTimeout(function() { window.location.reload(true); }, 2000)
            },
            cache: false,
        });

    
    });
 



  $("#change_auth_password").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/change_auth_password?' + access_token
    window.location.href = url;
            
    
  });




    $("#home").click(function home(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/view_machines?' + access_token
    window.location.href = url;
            
    
  });


  $("#logo_home").click(function home(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/view_machines?' + access_token
    window.location.href = url;
            
    
  });

  $("#add").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/add_machine?' + access_token
    window.location.href = url;
            
    
  });



  $("#delete").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/delete_machine?' + access_token
    window.location.href = url;
            
    
  });



  $("#edit").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/edit_machine?' + access_token
    window.location.href = url;
            
    
  });


  $("#view").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/view_machines?' + access_token
    window.location.href = url;
            
     });


  $("#configure").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/configure_machine?' + access_token
    window.location.href = url;
            
     });

  $("#prefed").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/prefed_recipes?' + access_token
    window.location.href = url;
            
     });

  $("#recipes").click(function logout(){
    // var access_token = window.location.search.substring(1);
    var url = '/admin/view_prefed_recipes?' + access_token
    window.location.href = url;
            
     });
  
</script>

<!-- Use any element to open the sidenav -->

<a href="" style="text-decoration: none"><span onclick="openNav()"><i class="fa fa-bars" aria-hidden="true" id = "arrow" style="font-size: 40px; color: rgb(111, 178, 220);; display: initial;"></i></span></a>
